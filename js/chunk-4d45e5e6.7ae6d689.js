(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d45e5e6"],{2532:function(e,t,r){"use strict";var n=r("23e7"),a=r("5a34"),o=r("1d80"),c=r("ab13");n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~String(o(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"48b8":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));r("ac1f"),r("5319");var n=r("6c02"),a=function(e){if(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),o=t.getHours(),c=t.getMinutes(),i=t.getSeconds(),d="",l="",s="",u="",b="",p="";return d=r+"",l=n<10?"0"+n:n+"",s=a<10?"0"+a:a+"",u=o<10?"0"+o:o+"",b=c<10?"0"+c:c+"",p=i<10?"0"+i:i+"",d+"-"+l+"-"+s+" "+u+":"+b+":"+p}return null},o=function(e){var t=Object(n["e"])();if(!(e.length<1))return!0;t.replace("/error/role")}},"5a34":function(e,t,r){var n=r("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},6436:function(e,t,r){"use strict";r.r(t);r("caad"),r("2532");var n=r("7a23"),a={class:"main"},o={class:"feature"},c={class:"operation"},i={key:0,class:"item"},d=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),l=Object(n["createTextVNode"])("新增"),s={class:"table"},u={class:"optionBtn"},b=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),p=Object(n["createTextVNode"])("编辑"),f=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),O=Object(n["createTextVNode"])("删除"),j={class:"modalMaster",ref:"modalMaster"},v={class:"container"},V=Object(n["createTextVNode"])(" 拓展端 "),m=Object(n["createTextVNode"])(" 销售端 "),h=Object(n["createTextVNode"])(" 用户端 "),w=Object(n["createTextVNode"])(" 商家端 "),x=Object(n["createTextVNode"])("点击上传"),C={class:"modalMaster",ref:"modalMaster"},N={class:"container"},g=Object(n["createTextVNode"])(" 拓展端 "),k=Object(n["createTextVNode"])(" 销售端 "),M=Object(n["createTextVNode"])(" 用户端 "),y=Object(n["createTextVNode"])(" 商家端 "),S=Object(n["createTextVNode"])("点击上传");function _(e,t,r,_,L,B){var T=Object(n["resolveComponent"])("a-button"),U=Object(n["resolveComponent"])("a-empty"),F=Object(n["resolveComponent"])("a-table"),R=Object(n["resolveComponent"])("a-spin"),A=Object(n["resolveComponent"])("a-select-option"),D=Object(n["resolveComponent"])("a-select"),E=Object(n["resolveComponent"])("a-form-item"),J=Object(n["resolveComponent"])("a-input"),q=Object(n["resolveComponent"])("a-upload"),I=Object(n["resolveComponent"])("a-form"),$=Object(n["resolveComponent"])("a-modal");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",c,[e.state.actions.includes("新增")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])(T,{type:"primary",class:"add-btn",onClick:t[1]||(t[1]=function(t){return e.addVersionBtn()})},{default:Object(n["withCtx"])((function(){return[d,l]})),_:1})])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])(R,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(U,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(F,{size:"middle",rowKey:"tport",scroll:{x:!0},pagination:!1,columns:e.state.tableColumns,dataSource:e.state.tableData},{tport:Object(n["withCtx"])((function(e){var t=e.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t=0==t?"拓展端":1==t?"销售端":2==t?"用户端":3==t?"商家端":"未知"),1)]})),option:Object(n["withCtx"])((function(t){var r=t.record;return[Object(n["createVNode"])("div",u,[e.state.actions.includes("编辑")?(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:0,class:"item",onClick:function(t){return e.editVersionBtn(r)}},[b,p],8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("删除")?(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:1,class:"item",onClick:function(t){return e.delVersionBtn(r)}},[f,O],8,["onClick"])):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])]),Object(n["createVNode"])("div",j,[Object(n["createVNode"])($,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalAddVisible,"onUpdate:visible":t[5]||(t[5]=function(t){return e.state.modalAddVisible=t}),width:800,title:"新增版本",onOk:e.modalAddSaveBtn},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",v,[Object(n["createVNode"])(I,{layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{label:"终端选择",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{allowClear:"",placeholder:"请选择",style:{width:"260px"},value:e.state.addModal.tport,"onUpdate:value":t[2]||(t[2]=function(t){return e.state.addModal.tport=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,{value:0},{default:Object(n["withCtx"])((function(){return[V]})),_:1}),Object(n["createVNode"])(A,{value:1},{default:Object(n["withCtx"])((function(){return[m]})),_:1}),Object(n["createVNode"])(A,{value:2},{default:Object(n["withCtx"])((function(){return[h]})),_:1}),Object(n["createVNode"])(A,{value:3},{default:Object(n["withCtx"])((function(){return[w]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(E,{label:"版本号",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{placeholder:"请输入",value:e.state.addModal.portVersion,"onUpdate:value":t[3]||(t[3]=function(t){return e.state.addModal.portVersion=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(E,{label:"文件上传",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{action:e.http.uploadApi,fileList:e.state.addModalFileList,"onUpdate:fileList":t[4]||(t[4]=function(t){return e.state.addModalFileList=t})},{default:Object(n["withCtx"])((function(){return[e.state.addModalFileList.length<1?(Object(n["openBlock"])(),Object(n["createBlock"])(T,{key:0},{default:Object(n["withCtx"])((function(){return[x]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["action","fileList"])]})),_:1})]})),_:1})])]})),_:1},8,["getContainer","visible","onOk"])],512),Object(n["createVNode"])("div",C,[Object(n["createVNode"])($,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalEditVisible,"onUpdate:visible":t[9]||(t[9]=function(t){return e.state.modalEditVisible=t}),width:800,title:"编辑版本",onOk:e.modalEditSaveBtn},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",N,[Object(n["createVNode"])(I,{layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{label:"终端选择",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{allowClear:"",placeholder:"请选择",style:{width:"260px"},value:e.state.editModal.tport,"onUpdate:value":t[6]||(t[6]=function(t){return e.state.editModal.tport=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,{value:0},{default:Object(n["withCtx"])((function(){return[g]})),_:1}),Object(n["createVNode"])(A,{value:1},{default:Object(n["withCtx"])((function(){return[k]})),_:1}),Object(n["createVNode"])(A,{value:2},{default:Object(n["withCtx"])((function(){return[M]})),_:1}),Object(n["createVNode"])(A,{value:3},{default:Object(n["withCtx"])((function(){return[y]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(E,{label:"版本号",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{value:e.state.editModal.portVersion,"onUpdate:value":t[7]||(t[7]=function(t){return e.state.editModal.portVersion=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(E,{label:"文件上传",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{action:e.http.uploadApi,fileList:e.state.editModalFileList,"onUpdate:fileList":t[8]||(t[8]=function(t){return e.state.editModalFileList=t})},{default:Object(n["withCtx"])((function(){return[e.state.editModalFileList.length<1?(Object(n["openBlock"])(),Object(n["createBlock"])(T,{key:0},{default:Object(n["withCtx"])((function(){return[S]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["action","fileList"])]})),_:1})]})),_:1})])]})),_:1},8,["getContainer","visible","onOk"])],512)])}r("04f3");var L=r("ed3b"),B=(r("380f"),r("f64c")),T=(r("96cf"),r("1da1")),U=r("48b8"),F=r("b32d"),R=Object(n["defineComponent"])({setup:function(){var e={tableColumns:[{title:"终端名",dataIndex:"tport",align:"center",slots:{customRender:"tport"}},{title:"版本号",dataIndex:"portVersion",align:"center",slots:{customRender:"portVersion"}},{title:"下载链接",dataIndex:"downloadUrl",align:"center",slots:{customRender:"downloadUrl"}},{title:"操作",dataIndex:"option",align:"center",slots:{customRender:"option"}}],tableData:[],delayLoading:!0,addModal:{downloadUrl:"",portVersion:"",tport:void 0},editModal:{downloadUrl:"",portVersion:"",tport:void 0},addModalFileList:[],editModalFileList:[],modalAddVisible:!1,modalEditVisible:!1,modalDelVisible:!1,actions:[]},t=Object(n["reactive"])(e);t.actions=JSON.parse(sessionStorage.currentActions),Object(U["b"])(t.actions);var r=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F["a"].post("Version/get",null);case 3:if(r=e.sent,"000000"!=r.code){e.next=10;break}return t.tableData=r.data,t.delayLoading=!1,e.abrupt("return",!0);case 10:return B["a"].error(r.msg,1),e.abrupt("return",!1);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e["catch"](0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();r();var a=function(){t.modalAddVisible=!0},o=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(t.addModal)),t.addModalFileList.length>0?n.downloadUrl=t.addModalFileList[0].response.data:n.downloadUrl="",e.prev=2,e.next=5,F["a"].post("Version/add",n);case 5:if(a=e.sent,"000000"!=a.code){e.next=14;break}return B["a"].success("新增版本成功！",1),r(),t.modalAddVisible=!1,t.addModal={downloadUrl:"",portVersion:"",tport:void 0},e.abrupt("return",!0);case 14:return B["a"].error(a.msg,1),e.abrupt("return",!1);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e["catch"](2),e.t0;case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){t.editModal.tport=e.tport,t.editModal.portVersion=e.portVersion,t.modalEditVisible=!0},i=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(t.editModal)),t.editModalFileList.length>0?n.downloadUrl=t.editModalFileList[0].response.data:n.downloadUrl=null,e.prev=2,e.next=5,F["a"].post("Version/update",n);case 5:if(a=e.sent,"000000"!=a.code){e.next=15;break}return B["a"].success("编辑版本成功！",1),r(),t.modalEditVisible=!1,t.editModal={downloadUrl:"",portVersion:"",tport:void 0},t.editModalFileList=[],e.abrupt("return",!0);case 15:return B["a"].error(a.msg,1),e.abrupt("return",!1);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e["catch"](2),e.t0;case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),d=function(e){L["a"].confirm({title:"确认删除该版本？",centered:!0,onOk:function(){return Object(T["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,sessionStorage.VersionSettingTport=e.tport,n.next=4,F["a"].post("Version/del",null,{params:{port:sessionStorage.VersionSettingTport}});case 4:if(a=n.sent,"000000"!=a.code){n.next=13;break}return sessionStorage.removeItem("VersionSettingTport"),B["a"].success("删除版本成功！",1),r(),t.modalDelVisible=!1,n.abrupt("return",!0);case 13:return B["a"].error(a.msg,1),n.abrupt("return",!1);case 15:n.next=20;break;case 17:throw n.prev=17,n.t0=n["catch"](0),n.t0;case 20:case"end":return n.stop()}}),n,null,[[0,17]])})))()},onCancel:function(){}})};return{state:t,addVersionBtn:a,editVersionBtn:c,delVersionBtn:d,modalAddSaveBtn:o,modalEditSaveBtn:i,http:F["a"]}}});R.render=_;t["default"]=R},ab13:function(e,t,r){var n=r("b622"),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,r){"use strict";var n=r("23e7"),a=r("4d64").includes,o=r("44d2"),c=r("ae40"),i=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!i},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")}}]);