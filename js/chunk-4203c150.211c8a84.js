(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4203c150"],{"48b8":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));a("ac1f"),a("5319");var n=a("6c02"),o=function(e){if(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getHours(),c=t.getMinutes(),l=t.getSeconds(),i="",u="",d="",s="",b="",m="";return i=a+"",u=n<10?"0"+n:n+"",d=o<10?"0"+o:o+"",s=r<10?"0"+r:r+"",b=c<10?"0"+c:c+"",m=l<10?"0"+l:l+"",i+"-"+u+"-"+d+" "+s+":"+b+":"+m}return null},r=function(e){var t=Object(n["e"])();if(!(e.length<1))return!0;t.replace("/error/role")}},"91fa":function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),o={class:"main"},r={class:"feature"},c=Object(n["createTextVNode"])(" 全部 "),l=Object(n["createTextVNode"])(" 否 "),i=Object(n["createTextVNode"])(" 是 "),u=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),d=Object(n["createTextVNode"])("搜索"),s={class:"operation"},b={class:"item"},m=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),p=Object(n["createTextVNode"])("导出"),f={class:"table"},j={key:0},O={key:1,style:{color:"#ff0000"}},w=Object(n["createTextVNode"])("+ "),g={class:"modalMaster",ref:"modalMaster"},h={class:"container"},v=Object(n["createTextVNode"])("否"),x=Object(n["createTextVNode"])("是"),N={key:0},C={key:1},V=Object(n["createTextVNode"])("无");function y(e,t,a,y,k,T){var D=Object(n["resolveComponent"])("a-select-option"),S=Object(n["resolveComponent"])("a-select"),I=Object(n["resolveComponent"])("a-form-item"),M=Object(n["resolveComponent"])("a-input"),_=Object(n["resolveComponent"])("a-range-picker"),B=Object(n["resolveComponent"])("a-button"),F=Object(n["resolveComponent"])("a-form"),R=Object(n["resolveComponent"])("a-empty"),z=Object(n["resolveComponent"])("a-textarea"),L=Object(n["resolveComponent"])("a-table"),U=Object(n["resolveComponent"])("a-spin"),Y=Object(n["resolveComponent"])("a-date-picker"),P=Object(n["resolveComponent"])("a-modal"),E=Object(n["resolveComponent"])("a-avatar");return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])(F,{layout:"inline",model:e.state.searchForm},{default:Object(n["withCtx"])((function(){return[1==e.state.userInfo.headCompany?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:0,label:"公司选择"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{value:e.state.companyId,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.companyId=t}),style:{width:"150px"},onChange:t[2]||(t[2]=function(t){return e.onCompanySelectChange()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{value:"allData"},{default:Object(n["withCtx"])((function(){return[c]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.companyList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:t,value:e.companyId},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(I,{label:"项目名称"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{placeholder:"请输入",style:{width:"150px"},value:e.state.searchForm.projectName,"onUpdate:value":t[3]||(t[3]=function(t){return e.state.searchForm.projectName=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"拓展人员"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{placeholder:"请选择",allowClear:"",value:e.state.searchForm.staffName,"onUpdate:value":t[4]||(t[4]=function(t){return e.state.searchForm.staffName=t}),style:{width:"150px"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.BDStaffList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:t,value:e.name},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"是否逾期"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{allowClear:"",placeholder:"请选择",style:{width:"150px"},value:e.state.searchForm.overdue,"onUpdate:value":t[5]||(t[5]=function(t){return e.state.searchForm.overdue=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{value:0},{default:Object(n["withCtx"])((function(){return[l]})),_:1}),Object(n["createVNode"])(D,{value:1},{default:Object(n["withCtx"])((function(){return[i]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"跟进时间"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{style:{width:"230px"},value:e.state.searchForm.timeRange,"onUpdate:value":t[6]||(t[6]=function(t){return e.state.searchForm.timeRange=t}),onChange:e.onDataRangePicker},null,8,["value","onChange"])]})),_:1}),Object(n["createVNode"])(I,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{class:"search-btn",onClick:e.onClickSearch},{default:Object(n["withCtx"])((function(){return[u,d]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",b,[Object(n["createVNode"])(B,{class:"export-btn",type:"primary",onClick:e.onClickExport},{default:Object(n["withCtx"])((function(){return[m,p]})),_:1},8,["onClick"])])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])(U,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[1==e.state.delayLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(R,{key:0})):Object(n["createCommentVNode"])("",!0),0==e.state.delayLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(L,{key:1,size:"middle",customRow:e.rowClick,rowKey:"followId",scroll:{x:!0},pagination:{total:e.state.pagination.total,current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,simple:e.state.pagination.simple,size:e.state.pagination.size,defaultPageSize:e.state.pagination.defaultPageSize,showSizeChanger:e.state.pagination.showSizeChanger,pageSizeOptions:e.state.pagination.pageSizeOptions,showTotal:e.state.pagination.showTotal,onChange:e.onPageChange,onShowSizeChange:e.onPageSizeChange},columns:e.state.tableColumns,dataSource:e.state.tableData},{overdue:Object(n["withCtx"])((function(e){var t=e.text;return[0==t?(Object(n["openBlock"])(),Object(n["createBlock"])("span",j,"否")):Object(n["createCommentVNode"])("",!0),1==t?(Object(n["openBlock"])(),Object(n["createBlock"])("span",O,"是")):Object(n["createCommentVNode"])("",!0)]})),content:Object(n["withCtx"])((function(e){var t=e.text;return[Object(n["createVNode"])(z,{disabled:"",value:t,"auto-size":{minRows:3}},null,8,["value"])]})),location:Object(n["withCtx"])((function(e){var t=e.text;return[Object(n["createVNode"])(z,{disabled:"",value:t,"auto-size":{minRows:3}},null,8,["value"])]})),followTime:Object(n["withCtx"])((function(t){var a=t.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.FormatDate(a)),1)]})),default:Object(n["withCtx"])((function(){return[w]})),_:1},8,["customRow","pagination","columns","dataSource"])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["spinning"])]),Object(n["createVNode"])("div",g,[Object(n["createVNode"])(P,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",visible:e.state.modalDetailVisible,"onUpdate:visible":t[19]||(t[19]=function(t){return e.state.modalDetailVisible=t}),width:800,title:"跟进详情",footer:null},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",h,[Object(n["createVNode"])(F,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{label:"项目名称"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{disabled:"",value:e.state.detailModal.projectName,"onUpdate:value":t[7]||(t[7]=function(t){return e.state.detailModal.projectName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"公司名称"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{disabled:"",value:e.state.detailModal.companyName,"onUpdate:value":t[8]||(t[8]=function(t){return e.state.detailModal.companyName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"项目地址"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{disabled:"",value:e.state.detailModal.location,"onUpdate:value":t[9]||(t[9]=function(t){return e.state.detailModal.location=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"拓展人员"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{disabled:"",value:e.state.detailModal.staffName,"onUpdate:value":t[10]||(t[10]=function(t){return e.state.detailModal.staffName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"跟进时间"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Y,{disabled:"",value:e.state.detailModal.followTime,"onUpdate:value":t[11]||(t[11]=function(t){return e.state.detailModal.followTime=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"跟进内容"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{disabled:"",value:e.state.detailModal.content,"onUpdate:value":t[12]||(t[12]=function(t){return e.state.detailModal.content=t}),"auto-size":{minRows:3},style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"待跟进时间"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Y,{disabled:"",value:e.state.detailModal.exceptTime,"onUpdate:value":t[13]||(t[13]=function(t){return e.state.detailModal.exceptTime=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"是否逾期"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{disabled:"",value:e.state.detailModal.overdue,"onUpdate:value":t[14]||(t[14]=function(t){return e.state.detailModal.overdue=t}),style:{width:"260px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{value:0},{default:Object(n["withCtx"])((function(){return[v]})),_:1}),Object(n["createVNode"])(D,{value:1},{default:Object(n["withCtx"])((function(){return[x]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"下次跟进时间"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Y,{disabled:"",value:e.state.detailModal.nextDate,"onUpdate:value":t[15]||(t[15]=function(t){return e.state.detailModal.nextDate=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"跟进结束时间"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Y,{disabled:"",value:e.state.detailModal.endPendTime,"onUpdate:value":t[16]||(t[16]=function(t){return e.state.detailModal.endPendTime=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"跟进失败备注"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{disabled:"",value:e.state.detailModal.endPendRemark,"onUpdate:value":t[17]||(t[17]=function(t){return e.state.detailModal.endPendRemark=t}),"auto-size":{minRows:3},style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(I,{label:"跟进图片"},{default:Object(n["withCtx"])((function(){return[e.state.detailModal.picList?(Object(n["openBlock"])(),Object(n["createBlock"])("div",N,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.detailModal.picList,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])("img",{key:a,src:t,style:{width:"100px"},onClick:function(a){return e.onClickImgViewer(t)}},null,8,["src","onClick"])})),128)),Object(n["createVNode"])(P,{visible:e.state.imgViewer,footer:null,onCancel:t[18]||(t[18]=function(t){return e.state.imgViewer=!1})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("img",{style:{width:"100%"},src:e.state.imgViewerUrl},null,8,["src"])]})),_:1},8,["visible"])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[Object(n["createVNode"])(E,{shape:"square",size:100},{default:Object(n["withCtx"])((function(){return[V]})),_:1})]))]})),_:1})]})),_:1})])]})),_:1},8,["getContainer","visible"])],512)])}a("380f");var k=a("f64c"),T=(a("96cf"),a("1da1")),D=a("0613"),S=a("48b8"),I=a("b32d"),M=a("c1df"),_=a.n(M),B=Object(n["defineComponent"])({setup:function(){var e={tableColumns:[{title:"项目名称",dataIndex:"projectName",fixed:"left",align:"center",slots:{customRender:"projectName"}},{title:"所属公司",dataIndex:"companyName",align:"center",slots:{customRender:"companyName"}},{title:"拓展人员",dataIndex:"staffName",align:"center",slots:{customRender:"staffName"}},{title:"是否逾期",dataIndex:"overdue",align:"center",slots:{customRender:"overdue"}},{title:"跟进地点",dataIndex:"location",align:"center",slots:{customRender:"location"}},{title:"跟进内容",dataIndex:"content",align:"center",slots:{customRender:"content"}},{title:"跟进时间",dataIndex:"followTime",align:"center",slots:{customRender:"followTime"}},{title:"待跟进时间",dataIndex:"exceptTime",align:"center",slots:{customRender:"exceptTime"}},{title:"下次跟进时间",dataIndex:"nextDate",align:"center",slots:{customRender:"nextDate"}}],tableData:[],selectedRowKeys:[],delayLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","30","50","100"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},searchForm:{projectName:"",staffName:void 0,overdue:void 0,followTimeStartTime:"",followTimeEndTime:"",timeRange:[]},imgViewer:!1,imgViewerUrl:"",companyList:[],addModal:{},editModal:{},detailModal:{},userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},modalAddVisible:!1,modalEndVisible:!1,modalProjectListVisible:!1,modalBDStaffVisible:!1,modalEditVisible:!1,modalDeleteVisible:!1,modalDetailVisible:!1,actions:[],companyId:"",BDStaffList:[]},t=Object(n["reactive"])(e),a=Object(D["c"])();t.userInfo=a.state.baseInfo.userInfo,t.companyId=t.userInfo.companyId,t.companyId=1==t.userInfo.headCompany?"allData":t.companyId,t.companyList=a.state.baseInfo.companyList,t.actions=JSON.parse(sessionStorage.currentActions),Object(S["b"])(t.actions);var o=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"allData"!=t.companyId){e.next=14;break}return e.next=4,I["a"].get("staff/getStaffIdAndName",{staffType:1});case 4:if(a=e.sent,"000000"!=a.code){e.next=10;break}return t.BDStaffList=a.data,e.abrupt("return",!0);case 10:return k["a"].error(a.msg,1),e.abrupt("return",!1);case 12:e.next=24;break;case 14:return e.next=16,I["a"].get("staff/getStaffIdAndName",{companyId:t.companyId,staffType:1});case 16:if(n=e.sent,"000000"!=n.code){e.next=22;break}return t.BDStaffList=n.data,e.abrupt("return",!0);case 22:return k["a"].error(n.msg,1),e.abrupt("return",!1);case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e["catch"](0),e.t0;case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}(),r=Object(n["computed"])((function(){return 1==t.selectedRowKeys.length})),c=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(a,n,r){var c,l,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,o(),"allData"!=t.companyId){e.next=32;break}if(!r){e.next=18;break}return e.next=6,I["a"].post("projectFollow/get",{page:a,rows:n},{params:{projectName:r.projectName,staffName:r.staffName,overdue:r.overdue,followTimeStartTime:r.followTimeStartTime,followTimeEndTime:r.followTimeEndTime}});case 6:if(c=e.sent,"000000"!=c.code){e.next=14;break}return t.tableData=c.data.list,t.pagination.total=c.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 14:return k["a"].error(c.msg,1),e.abrupt("return",!1);case 16:e.next=30;break;case 18:return e.next=20,I["a"].post("projectFollow/get",{page:a,rows:n});case 20:if(l=e.sent,"000000"!=l.code){e.next=28;break}return t.tableData=l.data.list,t.pagination.total=l.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 28:return k["a"].error(l.msg,1),e.abrupt("return",!1);case 30:e.next=59;break;case 32:if(!r){e.next=47;break}return e.next=35,I["a"].post("projectFollow/get",{page:a,rows:n},{params:{companyId:t.companyId,projectName:r.projectName,staffName:r.staffName,overdue:r.overdue,followTimeStartTime:r.followTimeStartTime,followTimeEndTime:r.followTimeEndTime}});case 35:if(i=e.sent,"000000"!=i.code){e.next=43;break}return t.tableData=i.data.list,t.pagination.total=i.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 43:return k["a"].error(i.msg,1),e.abrupt("return",!1);case 45:e.next=59;break;case 47:return e.next=49,I["a"].post("projectFollow/get",{page:a,rows:n},{params:{companyId:t.companyId}});case 49:if(u=e.sent,"000000"!=u.code){e.next=57;break}return t.tableData=u.data.list,t.pagination.total=u.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 57:return k["a"].error(u.msg,1),e.abrupt("return",!1);case 59:e.next=64;break;case 61:throw e.prev=61,e.t0=e["catch"](0),e.t0;case 64:case"end":return e.stop()}}),e,null,[[0,61]])})));return function(t,a,n){return e.apply(this,arguments)}}();c(t.pagination.current,t.pagination.pageSize);var l=function(){t.delayLoading=!0,c(t.pagination.current,t.pagination.pageSize,t.searchForm)},i=function(){t.delayLoading=!0,c(t.pagination.current,t.pagination.pageSize)},u=function(e){t.imgViewerUrl=e,t.imgViewer=!0},d=function(e,a){t.searchForm.followTimeStartTime=a[0],t.searchForm.followTimeEndTime=a[1]},s=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I["a"].getExport("projectFollow/exportExcelProjectFollow",{companyId:"allData"==t.companyId?null:t.companyId,staffName:t.searchForm.staffName,followTimeStartTime:t.searchForm.followTimeStartTime,followTimeEndTime:t.searchForm.followTimeEndTime});case 3:a=e.sent,200==a.status?window.open(a.request.responseURL):k["a"].error("导出失败！",1),e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){return{dblclick:function(){var a=Object(T["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I["a"].get("projectFollow/detail",{followId:e.followId});case 3:if(n=a.sent,"000000"!=n.code){a.next=15;break}return n.data.followTime=null==n.data.followTime?null:_()(new Date(n.data.followTime),"YYYY-MM-DD"),n.data.exceptTime=null==n.data.exceptTime?null:_()(new Date(n.data.exceptTime),"YYYY-MM-DD"),n.data.createTime=null==n.data.createTime?null:_()(new Date(n.data.createTime),"YYYY-MM-DD"),n.data.endPendTime=null==n.data.endPendTime?null:_()(new Date(n.data.endPendTime),"YYYY-MM-DD"),n.data.nextDate=null==n.data.nextDate?null:_()(new Date(n.data.nextDate),"YYYY-MM-DD"),t.detailModal=n.data,t.modalDetailVisible=!0,a.abrupt("return",!0);case 15:return k["a"].error(n.msg,1),a.abrupt("return",!1);case 17:a.next=22;break;case 19:throw a.prev=19,a.t0=a["catch"](0),a.t0;case 22:case"end":return a.stop()}}),a,null,[[0,19]])})));function n(){return a.apply(this,arguments)}return n}()}},m=function(e,a){t.delayLoading=!0,t.searchForm?c(e,a,t.searchForm):c(e,a),t.pagination.current=e,t.pagination.pageSize=a},p=function(e,a){t.delayLoading=!0,t.searchForm?c(e,a,t.searchForm):c(e,a),t.pagination.pageSize=a};return{state:t,hasSelected:r,onPageChange:m,onPageSizeChange:p,onClickSearch:l,onClickImgViewer:u,onDataRangePicker:d,onClickExport:s,onCompanySelectChange:i,rowClick:b,FormatDate:S["a"],http:I["a"]}}});B.render=y;t["default"]=B}}]);