(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-684e259b"],{2532:function(e,t,a){"use strict";var n=a("23e7"),o=a("5a34"),r=a("1d80"),c=a("ab13");n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~String(r(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"48b8":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));a("ac1f"),a("5319");var n=a("6c02"),o=function(e){if(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getHours(),c=t.getMinutes(),i=t.getSeconds(),l="",d="",s="",u="",f="",m="";return l=a+"",d=n<10?"0"+n:n+"",s=o<10?"0"+o:o+"",u=r<10?"0"+r:r+"",f=c<10?"0"+c:c+"",m=i<10?"0"+i:i+"",l+"-"+d+"-"+s+" "+u+":"+f+":"+m}return null},r=function(e){var t=Object(n["e"])();if(!(e.length<1))return!0;t.replace("/error/role")}},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},ab13:function(e,t,a){var n=a("b622"),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,a){"use strict";var n=a("23e7"),o=a("4d64").includes,r=a("44d2"),c=a("ae40"),i=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!i},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},ecc8:function(e,t,a){"use strict";a.r(t);a("caad"),a("b0c0"),a("2532");var n=a("7a23"),o={class:"main"},r={class:"feature"},c=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),i=Object(n["createTextVNode"])("搜索"),l={class:"operation"},d={key:0,class:"item"},s=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),u=Object(n["createTextVNode"])("新增"),f={key:1,class:"item"},m=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),p=Object(n["createTextVNode"])("编辑"),b={key:2,class:"item"},g=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),h=Object(n["createTextVNode"])("删除"),O={key:3,class:"item"},j=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),v=Object(n["createTextVNode"])("员工转移"),C={class:"table"},y={class:"modalMaster",ref:"modalMaster"},w={class:"container"},S={class:"modalComponent",ref:"modalComponent"},x={class:"modalMaster",ref:"modalMaster"},N={class:"container"},V={class:"modalComponent",ref:"modalComponent"},k={class:"modalMaster",ref:"modalMaster"},L={class:"container"},M={class:"modalComponent",ref:"modalComponent"};function I(e,t,a,I,z,R){var B=Object(n["resolveComponent"])("a-input"),_=Object(n["resolveComponent"])("a-form-item"),D=Object(n["resolveComponent"])("a-button"),T=Object(n["resolveComponent"])("a-form"),F=Object(n["resolveComponent"])("a-empty"),A=Object(n["resolveComponent"])("a-table"),P=Object(n["resolveComponent"])("a-spin"),U=Object(n["resolveComponent"])("ModalLeaderStaff"),E=Object(n["resolveComponent"])("a-modal"),K=Object(n["resolveComponent"])("a-cascader"),J=Object(n["resolveComponent"])("a-input-search"),q=Object(n["resolveComponent"])("ModalAllStaff"),$=Object(n["resolveComponent"])("a-select-option"),H=Object(n["resolveComponent"])("a-select");return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])(T,{layout:"inline",model:e.state.searchForm},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{label:"公司名称"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",style:{width:"150px"},value:e.state.searchForm.companyName,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.searchForm.companyName=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(_,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{class:"search-btn",onClick:e.onClickSearch},{default:Object(n["withCtx"])((function(){return[c,i]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(n["createVNode"])("div",l,[e.state.actions.includes("新增")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",d,[Object(n["createVNode"])(D,{type:"primary",class:"add-btn",onClick:e.modalAddShowBtn},{default:Object(n["withCtx"])((function(){return[s,u]})),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("编辑")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",f,[Object(n["createVNode"])(D,{type:"primary",class:"edit-btn",onClick:e.modalEditShowBtn,disabled:!e.hasSelected},{default:Object(n["withCtx"])((function(){return[m,p]})),_:1},8,["onClick","disabled"])])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("删除")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",b,[Object(n["createVNode"])(D,{type:"danger",class:"del-btn",onClick:e.modalDeleteShowBtn,disabled:!e.hasSelected},{default:Object(n["withCtx"])((function(){return[g,h]})),_:1},8,["onClick","disabled"])])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("员工转移")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",O,[Object(n["createVNode"])(D,{type:"primary",class:"add-btn",onClick:e.modalTransferShowBtn},{default:Object(n["withCtx"])((function(){return[j,v]})),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",C,[Object(n["createVNode"])(P,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(F,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(A,{size:"middle",rowKey:"companyId",scroll:{x:!0},pagination:!1,rowSelection:{type:"radio",selectedRowKeys:e.state.selectedRowKeys,onChange:e.onChangTable,fixed:!0},columns:e.state.tableColumns,dataSource:e.state.tableData},{loction:Object(n["withCtx"])((function(e){var t=e.record;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.province+"-"+t.city+"-"+t.district),1)]})),createTime:Object(n["withCtx"])((function(t){var a=t.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.FormatDate(a)),1)]})),_:1},8,["rowSelection","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])]),Object(n["createVNode"])("div",y,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalAddVisible,"onUpdate:visible":t[8]||(t[8]=function(t){return e.state.modalAddVisible=t}),width:800,title:"新增公司",onOk:e.modalAddSaveBtn,confirmLoading:e.state.confirmLoading},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",w,[Object(n["createVNode"])("div",S,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalComponent},destroyOnClose:"",centered:"",visible:e.state.modalLeaderStaffAddVisible,"onUpdate:visible":t[2]||(t[2]=function(t){return e.state.modalLeaderStaffAddVisible=t}),width:800,title:"负责人列表",footer:null},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{onOnModalLeaderStaffAddChange:e.onModalLeaderStaffAddChange},null,8,["onOnModalLeaderStaffAddChange"])]})),_:1},8,["getContainer","visible"])],512),Object(n["createVNode"])(T,{ref:"addModalDom",model:e.state.addModal,rules:e.addRules,layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{label:"公司名称",name:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",value:e.state.addModal.name,"onUpdate:value":t[3]||(t[3]=function(t){return e.state.addModal.name=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(_,{label:"区域",name:"province"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(K,{allowClear:"",value:e.state.addModal.loction,"onUpdate:value":t[4]||(t[4]=function(t){return e.state.addModal.loction=t}),options:e.state.regionData.province,onChange:e.regionChange,style:{width:"260px"}},null,8,["value","options","onChange"])]})),_:1}),Object(n["createVNode"])(_,{label:"登录账号",name:"companyloginName"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",value:e.state.addModal.companyloginName,"onUpdate:value":t[5]||(t[5]=function(t){return e.state.addModal.companyloginName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(_,{label:"负责人"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{value:e.state.addModal.contactName,"onUpdate:value":t[6]||(t[6]=function(t){return e.state.addModal.contactName=t}),placeholder:"请选择","enter-button":"选择",onSearch:e.modalLeaderStaffAddShowBtn,style:{width:"260px"}},null,8,["value","onSearch"])]})),_:1}),Object(n["createVNode"])(_,{label:"手机号"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",value:e.state.addModal.phone,"onUpdate:value":t[7]||(t[7]=function(t){return e.state.addModal.phone=t}),style:{width:"260px"}},null,8,["value"])]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["getContainer","visible","onOk","confirmLoading"])],512),Object(n["createVNode"])("div",x,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalEditVisible,"onUpdate:visible":t[15]||(t[15]=function(t){return e.state.modalEditVisible=t}),width:800,title:"编辑公司",onOk:e.modalEditSaveBtn,confirmLoading:e.state.confirmLoading},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",N,[Object(n["createVNode"])("div",V,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalComponent},destroyOnClose:"",centered:"",visible:e.state.modalLeaderStaffEditVisible,"onUpdate:visible":t[9]||(t[9]=function(t){return e.state.modalLeaderStaffEditVisible=t}),width:800,title:"负责人列表",footer:null},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{onOnModalLeaderStaffEditChange:e.onModalLeaderStaffEditChange},null,8,["onOnModalLeaderStaffEditChange"])]})),_:1},8,["getContainer","visible"])],512),Object(n["createVNode"])(T,{ref:"editModalDom",model:e.state.editModal,rules:e.editRules,layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{label:"公司名称",name:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",value:e.state.editModal.name,"onUpdate:value":t[10]||(t[10]=function(t){return e.state.editModal.name=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(_,{label:"区域",name:"province"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(K,{allowClear:"",value:e.state.editModal.loction,"onUpdate:value":t[11]||(t[11]=function(t){return e.state.editModal.loction=t}),options:e.state.regionData.province,onChange:e.regionChange,style:{width:"260px"}},null,8,["value","options","onChange"])]})),_:1}),Object(n["createVNode"])(_,{label:"登录账号",name:"companyloginName"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",value:e.state.editModal.companyloginName,"onUpdate:value":t[12]||(t[12]=function(t){return e.state.editModal.companyloginName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(_,{label:"负责人"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{value:e.state.editModal.contactName,"onUpdate:value":t[13]||(t[13]=function(t){return e.state.editModal.contactName=t}),placeholder:"请选择","enter-button":"选择",onSearch:e.modalLeaderStaffEditShowBtn,style:{width:"260px"}},null,8,["value","onSearch"])]})),_:1}),Object(n["createVNode"])(_,{label:"手机号"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{placeholder:"请输入",value:e.state.editModal.phone,"onUpdate:value":t[14]||(t[14]=function(t){return e.state.editModal.phone=t}),style:{width:"260px"}},null,8,["value"])]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["getContainer","visible","onOk","confirmLoading"])],512),Object(n["createVNode"])("div",k,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalTransferVisible,"onUpdate:visible":t[21]||(t[21]=function(t){return e.state.modalTransferVisible=t}),width:800,title:"员工转移",onOk:e.modalTransferSaveBtn,confirmLoading:e.state.confirmLoading},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",L,[Object(n["createVNode"])("div",M,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalComponent},destroyOnClose:"",centered:"",visible:e.state.modalAllStaffVisible,"onUpdate:visible":t[16]||(t[16]=function(t){return e.state.modalAllStaffVisible=t}),width:800,title:"员工列表",footer:null},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{onOnModalAllStaffChange:e.onModalAllStaffChange},null,8,["onOnModalAllStaffChange"])]})),_:1},8,["getContainer","visible"])],512),Object(n["createVNode"])(T,{ref:"transferModalDom",model:e.state.transferModal,rules:e.transferRules,layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{label:"转出公司"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H,{placeholder:"请选择",value:e.state.transferModal.fromCompanyId,"onUpdate:value":t[17]||(t[17]=function(t){return e.state.transferModal.fromCompanyId=t}),style:{width:"260px"},onChange:t[18]||(t[18]=function(t){return e.onCompanySelectChange()})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.companyList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:t,value:e.companyId},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(_,{label:"转移员工",name:"staffName"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{value:e.state.transferModal.staffName,"onUpdate:value":t[19]||(t[19]=function(t){return e.state.transferModal.staffName=t}),placeholder:"请选择","enter-button":"选择",onSearch:e.modalAllStaffShowBtn,style:{width:"260px"}},null,8,["value","onSearch"])]})),_:1}),Object(n["createVNode"])(_,{label:"转入公司"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H,{placeholder:"请选择",value:e.state.transferModal.toCompanyId,"onUpdate:value":t[20]||(t[20]=function(t){return e.state.transferModal.toCompanyId=t}),style:{width:"260px"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.companyList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:t,value:e.companyId},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["getContainer","visible","onOk","confirmLoading"])],512)])}a("d3b7");var z=a("5530"),R=(a("04f3"),a("ed3b")),B=(a("380f"),a("f64c")),_=(a("96cf"),a("1da1")),D=a("0613"),T=a("48b8"),F={class:"content"},A=Object(n["createTextVNode"])("搜索"),P={key:0};function U(e,t,a,o,r,c){var i=Object(n["resolveComponent"])("a-input"),l=Object(n["resolveComponent"])("a-form-item"),d=Object(n["resolveComponent"])("a-button"),s=Object(n["resolveComponent"])("a-form"),u=Object(n["resolveComponent"])("a-empty"),f=Object(n["resolveComponent"])("a-table"),m=Object(n["resolveComponent"])("a-spin");return Object(n["openBlock"])(),Object(n["createBlock"])("div",F,[Object(n["createVNode"])(s,{class:"modal-search-box",layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{label:"员工搜索"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{value:e.state.searchForm.staffName,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.searchForm.staffName=t}),style:{width:"150px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{class:"search-btn",onClick:t[2]||(t[2]=function(t){return e.onClickSearch()})},{default:Object(n["withCtx"])((function(){return[A]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(m,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(u,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(f,{customRow:e.rowClick,rowKey:"staffId",scroll:{x:!0},size:"small",pagination:{total:e.state.pagination.total,current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,simple:e.state.pagination.simple,size:"small",defaultPageSize:e.state.pagination.defaultPageSize,showSizeChanger:e.state.pagination.showSizeChanger,pageSizeOptions:e.state.pagination.pageSizeOptions,showTotal:e.state.pagination.showTotal,onChange:e.onPageChange,onShowSizeChange:e.onPageSizeChange},columns:e.state.tableColumns,dataSource:e.state.tableData},{roles:Object(n["withCtx"])((function(e){var t=e.text;return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(function(e,a){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:a},[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.roleName),1),a!==t.length-1?(Object(n["openBlock"])(),Object(n["createBlock"])("span",P,"、")):Object(n["createCommentVNode"])("",!0)],64)})),128))]})),_:1},8,["customRow","pagination","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])])}var E=a("b32d"),K=Object(n["defineComponent"])({name:"ModalLeaderStaff",setup:function(e,t){var a={tableColumns:[{title:"所属公司",dataIndex:"companyName",align:"center",slots:{customRender:"companyName"}},{title:"姓名",dataIndex:"name",align:"center",slots:{customRender:"name"}},{title:"员工角色",dataIndex:"roles",align:"center",slots:{customRender:"roles"}}],tableData:[],delayLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},companyList:[],searchForm:{staffName:""},selectedRowKeys:[],allData:!1,companyId:""},o=Object(n["reactive"])(a),r=Object(D["c"])();o.userInfo=r.state.baseInfo.userInfo,o.companyId=o.userInfo.companyId,o.companyList=r.state.baseInfo.companyList;var c=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,c,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"allData"!=o.companyId){e.next=31;break}if(!n){e.next=17;break}return e.next=5,E["a"].post("staff/getStaffSearchList",[0,1],{params:{staffName:n.staffName}});case 5:if(r=e.sent,"000000"!=r.code){e.next=13;break}return o.tableData=r.data.list,o.pagination.total=r.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 13:return B["a"].error(r.msg,1),e.abrupt("return",!1);case 15:e.next=29;break;case 17:return e.next=19,E["a"].post("staff/getStaffSearchList",[0,1]);case 19:if(c=e.sent,"000000"!=c.code){e.next=27;break}return o.tableData=c.data.list,o.pagination.total=c.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 27:return B["a"].error(c.msg,1),e.abrupt("return",!1);case 29:e.next=58;break;case 31:if(!n){e.next=46;break}return e.next=34,E["a"].post("staff/getStaffSearchList",[0,1],{params:{companyId:o.companyId,staffName:n.staffName}});case 34:if(i=e.sent,"000000"!=i.code){e.next=42;break}return o.tableData=i.data.list,o.pagination.total=i.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 42:return B["a"].error(i.msg,1),e.abrupt("return",!1);case 44:e.next=58;break;case 46:return e.next=48,E["a"].post("staff/getStaffSearchList",[0,1],{params:{companyId:o.companyId}});case 48:if(l=e.sent,"000000"!=l.code){e.next=56;break}return o.tableData=l.data.list,o.pagination.total=l.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 56:return B["a"].error(l.msg,1),e.abrupt("return",!1);case 58:e.next=63;break;case 60:throw e.prev=60,e.t0=e["catch"](0),e.t0;case 63:case"end":return e.stop()}}),e,null,[[0,60]])})));return function(t,a,n){return e.apply(this,arguments)}}();c(o.pagination.current,o.pagination.pageSize);var i=function(){o.searchForm?c(o.pagination.current,o.pagination.pageSize,o.searchForm):c(o.pagination.current,o.pagination.pageSize)},l=function(e){return{onclick:function(){t.emit("on-modal-leader-staff-add-change",e),t.emit("on-modal-leader-staff-edit-change",e)}}},d=function(e,t){o.pagination.current=e,o.pagination.pageSize=t,c(e,t,o.searchForm)},s=function(e,t){o.pagination.pageSize=t,c(e,t,o.searchForm)};return{state:o,onPageChange:d,onPageSizeChange:s,onClickSearch:i,rowClick:l}}});K.render=U;var J=K,q={class:"content"},$=Object(n["createTextVNode"])(" 销售职员 "),H=Object(n["createTextVNode"])(" 拓展职员 "),Y=Object(n["createTextVNode"])(" 其他职员 "),G=Object(n["createTextVNode"])("搜索"),Q={key:0};function W(e,t,a,o,r,c){var i=Object(n["resolveComponent"])("a-select-option"),l=Object(n["resolveComponent"])("a-select"),d=Object(n["resolveComponent"])("a-form-item"),s=Object(n["resolveComponent"])("a-input"),u=Object(n["resolveComponent"])("a-button"),f=Object(n["resolveComponent"])("a-form"),m=Object(n["resolveComponent"])("a-empty"),p=Object(n["resolveComponent"])("a-table"),b=Object(n["resolveComponent"])("a-spin");return Object(n["openBlock"])(),Object(n["createBlock"])("div",q,[Object(n["createVNode"])(f,{class:"modal-search-box",layout:"inline"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{label:"员工类别"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{allowClear:"",placeholder:"请选择",style:{width:"150px"},value:e.state.searchForm.staffType,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.searchForm.staffType=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{value:0},{default:Object(n["withCtx"])((function(){return[$]})),_:1}),Object(n["createVNode"])(i,{value:1},{default:Object(n["withCtx"])((function(){return[H]})),_:1}),Object(n["createVNode"])(i,{value:2},{default:Object(n["withCtx"])((function(){return[Y]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(d,{label:"员工搜索"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{placeholder:"请输入",value:e.state.searchForm.staffName,"onUpdate:value":t[2]||(t[2]=function(t){return e.state.searchForm.staffName=t}),style:{width:"150px"}},null,8,["value"])]})),_:1}),Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{class:"search-btn",onClick:t[3]||(t[3]=function(t){return e.onClickSearch()})},{default:Object(n["withCtx"])((function(){return[G]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(b,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(m,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(p,{customRow:e.rowClick,rowKey:"staffId",scroll:{x:!0},size:"small",pagination:{total:e.state.pagination.total,current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,simple:e.state.pagination.simple,size:"small",defaultPageSize:e.state.pagination.defaultPageSize,showSizeChanger:e.state.pagination.showSizeChanger,pageSizeOptions:e.state.pagination.pageSizeOptions,showTotal:e.state.pagination.showTotal,onChange:e.onPageChange,onShowSizeChange:e.onPageSizeChange},columns:e.state.tableColumns,dataSource:e.state.tableData},{roles:Object(n["withCtx"])((function(e){var t=e.text;return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(function(e,a){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:a},[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.roleName),1),a!==t.length-1?(Object(n["openBlock"])(),Object(n["createBlock"])("span",Q,"、")):Object(n["createCommentVNode"])("",!0)],64)})),128))]})),_:1},8,["customRow","pagination","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])])}var X=Object(n["defineComponent"])({name:"ModalAllStaff",setup:function(e,t){var a={tableColumns:[{title:"所属公司",dataIndex:"companyName",align:"center",slots:{customRender:"companyName"}},{title:"姓名",dataIndex:"name",align:"center",slots:{customRender:"name"}},{title:"员工角色",dataIndex:"roles",align:"center",slots:{customRender:"roles"}}],tableData:[],delayLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},companyList:[],searchForm:{staffName:"",staffType:void 0},allData:!1,companyId:""},o=Object(n["reactive"])(a),r=Object(D["c"])();o.userInfo=r.state.baseInfo.userInfo,o.companyId=sessionStorage.CompanyFromCompanyId,o.companyList=r.state.baseInfo.companyList;var c=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,c,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"allData"!=o.companyId){e.next=31;break}if(!n){e.next=17;break}return e.next=5,E["a"].post("staff/getStaffSearchList",[],{params:{staffName:n.staffName,staffType:n.staffType}});case 5:if(r=e.sent,"000000"!=r.code){e.next=13;break}return o.tableData=r.data.list,o.pagination.total=r.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 13:return B["a"].error(r.msg,1),e.abrupt("return",!1);case 15:e.next=29;break;case 17:return e.next=19,E["a"].post("staff/getStaffSearchList",[]);case 19:if(c=e.sent,"000000"!=c.code){e.next=27;break}return o.tableData=c.data.list,o.pagination.total=c.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 27:return B["a"].error(c.msg,1),e.abrupt("return",!1);case 29:e.next=58;break;case 31:if(!n){e.next=46;break}return e.next=34,E["a"].post("staff/getStaffSearchList",[],{params:{companyId:o.companyId,staffName:n.staffName,staffType:n.staffType}});case 34:if(i=e.sent,"000000"!=i.code){e.next=42;break}return o.tableData=i.data.list,o.pagination.total=i.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 42:return B["a"].error(i.msg,1),e.abrupt("return",!1);case 44:e.next=58;break;case 46:return e.next=48,E["a"].post("staff/getStaffSearchList",[],{params:{companyId:o.companyId}});case 48:if(l=e.sent,"000000"!=l.code){e.next=56;break}return o.tableData=l.data.list,o.pagination.total=l.data.total,o.delayLoading=!1,e.abrupt("return",!0);case 56:return B["a"].error(l.msg,1),e.abrupt("return",!1);case 58:e.next=63;break;case 60:throw e.prev=60,e.t0=e["catch"](0),e.t0;case 63:case"end":return e.stop()}}),e,null,[[0,60]])})));return function(t,a,n){return e.apply(this,arguments)}}();c(o.pagination.current,o.pagination.pageSize);var i=function(){o.delayLoading=!0,c(o.pagination.current,o.pagination.pageSize,o.searchForm)},l=function(e){return{onclick:function(){t.emit("on-modal-all-staff-change",e)}}},d=function(e,t){o.pagination.current=e,o.pagination.pageSize=t,c(e,t,o.searchForm)},s=function(e,t){o.pagination.pageSize=t,c(e,t,o.searchForm)};return{state:o,onPageChange:d,onPageSizeChange:s,onClickSearch:i,rowClick:l}}});X.render=W;var Z=X,ee=Object(n["defineComponent"])({components:{ModalLeaderStaff:J,ModalAllStaff:Z},setup:function(){var e={tableColumns:[{title:"公司名称",dataIndex:"name",align:"center",slots:{customRender:"name"}},{title:"位置",dataIndex:"loction",align:"center",slots:{customRender:"loction"}},{title:"登录账号",dataIndex:"companyloginName",align:"center",slots:{customRender:"companyloginName"}},{title:"负责人姓名",dataIndex:"contactName",align:"center",slots:{customRender:"contactName"}},{title:"联系电话",dataIndex:"phone",align:"center",slots:{customRender:"phone"}},{title:"拓展项目数量",dataIndex:"expandProjectNumber",align:"center",slots:{customRender:"expandProjectNumber"}},{title:"销售项目数量",dataIndex:"saleProjectNumber",align:"center",slots:{customRender:"saleProjectNumber"}},{title:"创建时间",dataIndex:"createTime",align:"center",slots:{customRender:"createTime"}}],tableData:[],selectedRowKeys:[],selectedRows:[],delayLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","30","50","100"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},searchForm:{companyName:""},addModal:{},editModal:{},transferModal:{},userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},regionData:{},modalAddVisible:!1,modalEditVisible:!1,modalDeleteVisible:!1,modalTransferVisible:!1,modalLeaderStaffAddVisible:!1,modalLeaderStaffEditVisible:!1,modalAllStaffVisible:!1,confirmLoading:!1,companyList:[],actions:[]},t=Object(n["reactive"])(e),a=Object(D["c"])();t.userInfo=a.state.baseInfo.userInfo,t.companyList=a.state.baseInfo.companyList,t.actions=JSON.parse(sessionStorage.currentActions),Object(T["b"])(t.actions);var o=Object(n["computed"])((function(){return 1==t.selectedRowKeys.length})),r=Object(n["ref"])(),c=Object(n["ref"])(),i=Object(n["ref"])(),l=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(a,n,o){var r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=16;break}return e.next=4,E["a"].post("company/get",{page:1,rows:100},{params:{companyName:o.companyName}});case 4:if(r=e.sent,"000000"!=r.code){e.next=12;break}return t.tableData=r.data.list,t.pagination.total=r.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 12:return B["a"].error(r.msg,1),e.abrupt("return",!1);case 14:e.next=28;break;case 16:return e.next=18,E["a"].post("company/get",{page:1,rows:100});case 18:if(c=e.sent,"000000"!=c.code){e.next=26;break}return t.tableData=c.data.list,t.pagination.total=c.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 26:return B["a"].error(c.msg,1),e.abrupt("return",!1);case 28:e.next=33;break;case 30:throw e.prev=30,e.t0=e["catch"](0),e.t0;case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,a,n){return e.apply(this,arguments)}}();l(t.pagination.current,t.pagination.pageSize);var d=function(e,a){t.selectedRows=a,t.selectedRowKeys=e},s=function(){t.delayLoading=!0,l(t.pagination.current,t.pagination.pageSize,t.searchForm)};t.regionData=a.state.baseInfo.regionData;var u=function(e){t.addModal.province=e[0],t.addModal.city=e[1],t.addModal.district=e[2],t.editModal.province=e[0],t.editModal.city=e[1],t.editModal.district=e[2]},f=function(){t.modalAddVisible=!0},m=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,t.confirmLoading=!0,r.value.validate().then(Object(_["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(JSON.stringify(t.addModal)),delete a.loction,e.next=4,E["a"].post("company/add",a);case 4:if(n=e.sent,"000000"!=n.code){e.next=14;break}return B["a"].success("新增公司成功",1),l(t.pagination.current,t.pagination.pageSize),t.modalAddVisible=!1,t.addModal={},t.confirmLoading=!1,e.abrupt("return",!0);case 14:return B["a"].error(n.msg,1),t.confirmLoading=!1,e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})))).catch((function(e){return t.confirmLoading=!1,e})),e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.editModal={},1!=t.selectedRows[0].headCompany){e.next=6;break}B["a"].error("总公司禁止编辑！",2),e.next=18;break;case 6:return e.next=8,E["a"].get("company/detail",{companyId:t.selectedRowKeys[0]});case 8:if(a=e.sent,"000000"!=a.code){e.next=16;break}return t.editModal=a.data,t.editModal.loction=[t.editModal.province,t.editModal.city,t.editModal.district],t.modalEditVisible=!0,e.abrupt("return",!0);case 16:return B["a"].error(a.msg,1),e.abrupt("return",!1);case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e["catch"](0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,t.confirmLoading=!0,c.value.validate().then(Object(_["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(JSON.stringify(t.editModal)),delete a.loction,e.next=4,E["a"].post("company/update",a);case 4:if(n=e.sent,"000000"!=n.code){e.next=14;break}return l(t.pagination.current,t.pagination.pageSize,t.searchForm),B["a"].success("信息更新成功！",1),t.modalEditVisible=!1,t.editModal={},t.confirmLoading=!1,e.abrupt("return",!0);case 14:return B["a"].error(n.msg,1),t.confirmLoading=!1,e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})))).catch((function(e){return t.confirmLoading=!1,e})),e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(){try{1==t.selectedRows[0].headCompany?B["a"].error("总公司禁止删除！",2):R["a"].confirm({title:"确认删除此公司？",centered:!0,onOk:function(){return Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["a"].get("company/del",{companyId:t.selectedRowKeys[0]});case 2:if(a=e.sent,"000000"!=a.code){e.next=12;break}return e.next=6,l(t.pagination.current,t.pagination.pageSize,t.searchForm);case 6:return B["a"].success("删除公司成功！",1),t.modalDeleteVisible=!1,t.selectedRowKeys=[],e.abrupt("return",!0);case 12:return B["a"].error(a.msg,1),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})))()},onCancel:function(){}})}catch(e){throw e}},h=function(){t.modalTransferVisible=!0},O=function(){sessionStorage.CompanyFromCompanyId=t.transferModal.fromCompanyId},j=function(){t.modalAllStaffVisible=!0},v=function(e){t.transferModal.staffName=e.name,t.transferModal.staffId=e.staffId,t.modalAllStaffVisible=!1},C=function(){try{t.confirmLoading=!0,i.value.validate().then(Object(_["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=JSON.parse(JSON.stringify(t.transferModal)),delete a.staffName,a.fromCompanyId!=a.toCompanyId){e.next=9;break}return B["a"].warning("转出转入公司不能相同，请重新选择",2),t.transferModal={},t.confirmLoading=!1,e.abrupt("return",!1);case 9:return e.next=11,E["a"].post("staff/transferOutStaff",{},{params:{fromCompanyId:a.fromCompanyId,staffId:a.staffId,toCompanyId:a.toCompanyId}});case 11:if(n=e.sent,"000000"!=n.code){e.next=21;break}return l(t.pagination.current,t.pagination.pageSize,t.searchForm),B["a"].success("员工转移成功！",1),t.modalTransferVisible=!1,t.transferModal={},t.confirmLoading=!1,e.abrupt("return",!0);case 21:return B["a"].error(n.msg,1),t.confirmLoading=!1,e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e)})))).catch((function(e){return t.confirmLoading=!1,e}))}catch(e){throw e}},y=function(){t.modalLeaderStaffAddVisible=!0},w=function(e){t.addModal.contactName=e.name,t.modalLeaderStaffAddVisible=!1},S=function(){t.modalLeaderStaffEditVisible=!0},x=function(e){t.editModal.contactName=e.name,t.modalLeaderStaffEditVisible=!1},N=function(e,a){t.delayLoading=!0,t.searchForm?l(e,a,t.searchForm):l(e,a),t.pagination.current=e,t.pagination.pageSize=a},V=function(e,a){t.delayLoading=!0,t.searchForm?l(e,a,t.searchForm):l(e,a),t.pagination.pageSize=a},k=function(e,t){return t?Promise.resolve():Promise.reject("请输入公司名")},L=function(e,t){return t?Promise.resolve():Promise.reject("请选择公司地址")},M=function(e,t){return t?Promise.resolve():Promise.reject("请输入公司登录账号")},I=function(e,t){return t?Promise.resolve():Promise.reject("请选择员工")},F=Object(n["reactive"])({addRules:{name:[{validator:k,trigger:"blur",required:!0}],province:[{validator:L,trigger:"blur",required:!0}],companyloginName:[{validator:M,trigger:"blur",required:!0}]},editRules:{name:[{validator:k,trigger:"blur",required:!0}],province:[{validator:L,trigger:"blur",required:!0}],companyloginName:[{validator:M,trigger:"blur",required:!0}]},transferRules:{staffName:[{validator:I,trigger:"blur",required:!0}]}});return Object(z["a"])({state:t,onChangTable:d,onClickSearch:s,onPageChange:N,onPageSizeChange:V,hasSelected:o,regionChange:u,modalAddSaveBtn:m,modalAddShowBtn:f,modalEditSaveBtn:b,modalEditShowBtn:p,modalDeleteShowBtn:g,modalTransferShowBtn:h,modalTransferSaveBtn:C,modalLeaderStaffAddShowBtn:y,onModalLeaderStaffAddChange:w,modalLeaderStaffEditShowBtn:S,onModalLeaderStaffEditChange:x,onModalAllStaffChange:v,modalAllStaffShowBtn:j,onCompanySelectChange:O,FormatDate:T["a"],addModalDom:r,editModalDom:c,transferModalDom:i},F)}});ee.render=I;t["default"]=ee}}]);