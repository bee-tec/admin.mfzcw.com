(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3951f5b4"],{"0437":function(e,t,a){"use strict";a.r(t);a("caad"),a("b0c0"),a("2532");var n=a("7a23"),r={class:"main"},o={class:"feature"},c=Object(n["createTextVNode"])(" 全部 "),i=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),s=Object(n["createTextVNode"])("搜索"),l={class:"operation"},d={key:0,class:"item"},u=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),m=Object(n["createTextVNode"])("新增"),p={class:"item"},b=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),g=Object(n["createTextVNode"])("导出"),v={class:"table"},f={class:"modalMaster",ref:"modalMaster"};function j(e,t,a,j,O,h){var N=Object(n["resolveComponent"])("a-select-option"),x=Object(n["resolveComponent"])("a-select"),C=Object(n["resolveComponent"])("a-form-item"),y=Object(n["resolveComponent"])("a-input"),w=Object(n["resolveComponent"])("a-range-picker"),k=Object(n["resolveComponent"])("a-button"),S=Object(n["resolveComponent"])("a-form"),I=Object(n["resolveComponent"])("a-empty"),V=Object(n["resolveComponent"])("a-table"),R=Object(n["resolveComponent"])("a-spin"),D=Object(n["resolveComponent"])("ModalDetail"),T=Object(n["resolveComponent"])("a-modal");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(S,{layout:"inline",model:e.state.searchForm},{default:Object(n["withCtx"])((function(){return[1==e.state.userInfo.headCompany?(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:0,label:"公司选择"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x,{value:e.state.companyId,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.companyId=t}),style:{width:"150px"},onChange:t[2]||(t[2]=function(t){return e.onCompanySelectChange()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{value:"allData"},{default:Object(n["withCtx"])((function(){return[c]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.companyList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:t,value:e.companyId},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(C,{label:"操作人"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{placeholder:"请输入",style:{width:"150px"},value:e.state.searchForm.staffName,"onUpdate:value":t[3]||(t[3]=function(t){return e.state.searchForm.staffName=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(C,{label:"交接前项目"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{placeholder:"请输入",style:{width:"150px"},value:e.state.searchForm.sendProjectName,"onUpdate:value":t[4]||(t[4]=function(t){return e.state.searchForm.sendProjectName=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(C,{label:"交接后项目"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{placeholder:"请输入",style:{width:"150px"},value:e.state.searchForm.saveProjectName,"onUpdate:value":t[5]||(t[5]=function(t){return e.state.searchForm.saveProjectName=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(C,{label:"交接时间"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{style:{width:"230px"},value:e.state.searchForm.timeRange,"onUpdate:value":t[6]||(t[6]=function(t){return e.state.searchForm.timeRange=t}),onChange:e.onDataRangePicker},null,8,["value","onChange"])]})),_:1}),Object(n["createVNode"])(C,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,{class:"search-btn",onClick:e.onClickSearch},{default:Object(n["withCtx"])((function(){return[i,s]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(n["createVNode"])("div",l,[e.state.actions.includes("新增")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",d,[Object(n["createVNode"])(k,{type:"primary",class:"add-btn",onClick:e.modalAddShowBtn},{default:Object(n["withCtx"])((function(){return[u,m]})),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",p,[Object(n["createVNode"])(k,{class:"export-btn",type:"primary",onClick:e.onClickExport},{default:Object(n["withCtx"])((function(){return[b,g]})),_:1},8,["onClick"])])])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])(R,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(I,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(V,{size:"middle",customRow:e.rowClick,rowKey:"handoverId",scroll:{x:!0},pagination:{total:e.state.pagination.total,current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,simple:e.state.pagination.simple,size:e.state.pagination.size,defaultPageSize:e.state.pagination.defaultPageSize,showSizeChanger:e.state.pagination.showSizeChanger,pageSizeOptions:e.state.pagination.pageSizeOptions,showTotal:e.state.pagination.showTotal,onChange:e.onPageChange,onShowSizeChange:e.onPageSizeChange},columns:e.state.tableColumns,dataSource:e.state.tableData},{reserveHandoverRel:Object(n["withCtx"])((function(e){var t=e.text;return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:t},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.reserveName+"x"+e.reserveNum+"  "),1)],64)})),128))]})),createTime:Object(n["withCtx"])((function(t){var a=t.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.FormatDate(a)),1)]})),_:1},8,["customRow","pagination","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])(T,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",visible:e.state.modalDetailVisible,"onUpdate:visible":t[7]||(t[7]=function(t){return e.state.modalDetailVisible=t}),width:800,title:"交接详情",footer:null},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{onOnModalDetailChange:e.onModalDetailChange},null,8,["onOnModalDetailChange"])]})),_:1},8,["getContainer","visible"])],512)])}a("380f");var O=a("f64c"),h=(a("96cf"),a("1da1")),N=a("0613"),x=a("48b8"),C={class:"content"};function y(e,t,a,r,o,c){var i=Object(n["resolveComponent"])("a-empty"),s=Object(n["resolveComponent"])("a-table"),l=Object(n["resolveComponent"])("a-spin");return Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[Object(n["createVNode"])(l,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(i,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(s,{customRow:e.rowClick,rowKey:"reserveId",pagination:!1,scroll:{x:!0},size:"small",columns:e.state.tableColumns,dataSource:e.state.tableData},{reserveType:Object(n["withCtx"])((function(e){var t=e.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(0==t?"拓展类":1==t?"销售大礼包":2==t?"销售小礼包":3==t?"金蛋礼包":4==t?"办公类":5==t?"公司发展":6==t?"其他":"固定资产"),1)]})),_:1},8,["customRow","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])])}var w=a("b32d"),k=Object(n["defineComponent"])({name:"ModalDetail",setup:function(e,t){var a={tableColumns:[{title:"商品名称",dataIndex:"reserveName",align:"center",slots:{customRender:"reserveName"}},{title:"商品品牌",dataIndex:"reserveBrand",align:"center",slots:{customRender:"reserveBrand"}},{title:"规格",dataIndex:"norm",align:"center",slots:{customRender:"norm"}},{title:"商品用途",dataIndex:"reserveType",align:"center",slots:{customRender:"reserveType"}},{title:"单位",dataIndex:"unit",align:"center",slots:{customRender:"unit"}},{title:"数量",dataIndex:"reserveNum",align:"center",slots:{customRender:"reserveNum"}}],tableData:[],delayLoading:!0},r=Object(n["reactive"])(a),o=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].post("Reserve/getReserveHandOverDetail",null,{params:{handoverId:sessionStorage.HandOverHandoverId}});case 3:if(t=e.sent,"000000"!=t.code){e.next=10;break}return r.tableData=t.data,r.delayLoading=!1,e.abrupt("return",!0);case 10:return O["a"].error(t.msg,1),e.abrupt("return",!1);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e["catch"](0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();o();var c=function(e){return{onclick:function(){t.emit("on-modal-detail-change",e)}}};return{state:r,rowClick:c}}});k.render=y;var S=k,I=Object(n["defineComponent"])({components:{ModalDetail:S},setup:function(){var e={tableColumns:[{title:"所属公司",dataIndex:"companyName",align:"center",slots:{customRender:"companyName"}},{title:"操作人",dataIndex:"staffName",align:"center",slots:{customRender:"staffName"}},{title:"交接前项目",dataIndex:"sendProjectName",align:"center",slots:{customRender:"sendProjectName"}},{title:"交接后项目",dataIndex:"saveProjectName",align:"center",slots:{customRender:"saveProjectName"}},{title:"交接商品明细",dataIndex:"reserveHandoverRel",align:"center",slots:{customRender:"reserveHandoverRel"}},{title:"备注",dataIndex:"remark",align:"center",slots:{customRender:"remark"}},{title:"出库时间",dataIndex:"createTime",align:"center",slots:{customRender:"createTime"}}],tableData:[],delayLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","30","50","100"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},searchForm:{staffName:"",sendProjectName:"",saveProjectName:"",startTime:"",endTime:"",timeRange:[]},userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},modalDetailVisible:!1,companyList:[],actions:[],companyId:""},t=Object(n["reactive"])(e),a=Object(N["c"])();t.userInfo=a.state.baseInfo.userInfo,t.companyId=t.userInfo.companyId,t.companyId=1==t.userInfo.headCompany?"allData":t.companyId,t.companyList=a.state.baseInfo.companyList,t.actions=JSON.parse(sessionStorage.currentActions),Object(x["b"])(t.actions);var r=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a,n,r){var o,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"allData"!=t.companyId){e.next=31;break}if(!r){e.next=17;break}return e.next=5,w["a"].post("Reserve/getReserveHandOver",{page:a,rows:n},{params:{reserveName:r.reserveName,staffName:r.staffName,sendProjectName:r.sendProjectName,saveProjectName:r.saveProjectName,startTime:r.startTime,endTime:r.endTime}});case 5:if(o=e.sent,"000000"!=o.code){e.next=13;break}return t.tableData=o.data.list,t.pagination.total=o.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 13:return O["a"].error(o.msg,1),e.abrupt("return",!1);case 15:e.next=29;break;case 17:return e.next=19,w["a"].post("Reserve/getReserveHandOver",{params:{page:a,rows:n}});case 19:if(c=e.sent,"000000"!=c.code){e.next=27;break}return t.tableData=c.data.list,t.pagination.total=c.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 27:return O["a"].error(c.msg,1),e.abrupt("return",!1);case 29:e.next=58;break;case 31:if(!r){e.next=46;break}return e.next=34,w["a"].post("Reserve/getReserveHandOver",{page:a,rows:n},{params:{companyId:t.companyId,reserveName:r.reserveName,staffName:r.staffName,sendProjectName:r.sendProjectName,saveProjectName:r.saveProjectName,startTime:r.startTime,endTime:r.endTime}});case 34:if(i=e.sent,"000000"!=i.code){e.next=42;break}return t.tableData=i.data.list,t.pagination.total=i.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 42:return O["a"].error(i.msg,1),e.abrupt("return",!1);case 44:e.next=58;break;case 46:return e.next=48,w["a"].post("Reserve/getReserveHandOver",{page:a,rows:n},{params:{companyId:t.companyId}});case 48:if(s=e.sent,"000000"!=s.code){e.next=56;break}return t.tableData=s.data.list,t.pagination.total=s.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 56:return O["a"].error(s.msg,1),e.abrupt("return",!1);case 58:e.next=63;break;case 60:throw e.prev=60,e.t0=e["catch"](0),e.t0;case 63:case"end":return e.stop()}}),e,null,[[0,60]])})));return function(t,a,n){return e.apply(this,arguments)}}();r(t.pagination.current,t.pagination.pageSize);var o=function(e,a){t.searchForm.startTime=a[0],t.searchForm.endTime=a[1]},c=function(){t.delayLoading=!0,r(t.pagination.current,t.pagination.pageSize)},i=function(){t.delayLoading=!0,r(t.pagination.current,t.pagination.pageSize,t.searchForm)},s=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].getExport("Reserve/exportExcelReserveHandOver",{companyId:"allData"==t.companyId?null:t.companyId,sendProjectName:t.searchForm.sendProjectName,saveProjectName:t.searchForm.saveProjectName,staffName:t.searchForm.staffName,startTime:t.searchForm.startTime,endTime:t.searchForm.endTime});case 3:a=e.sent,200==a.status?window.open(a.request.responseURL):O["a"].error("导出失败！",1),e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){return{dblclick:function(){sessionStorage.HandOverHandoverId=e.handoverId,t.modalDetailVisible=!0}}},d=function(e){t.modalDetailVisible=!1,sessionStorage.removeItem("HandOverHandoverId")},u=function(e,a){t.delayLoading=!0,t.searchForm?r(e,a,t.searchForm):r(e,a),t.pagination.current=e,t.pagination.pageSize=a},m=function(e,a){t.delayLoading=!0,t.searchForm?r(e,a,t.searchForm):r(e,a),t.pagination.pageSize=a};return{state:t,onClickSearch:i,onPageChange:u,onPageSizeChange:m,onClickExport:s,onDataRangePicker:o,FormatDate:x["a"],onCompanySelectChange:c,rowClick:l,onModalDetailChange:d}}});I.render=j;t["default"]=I},2532:function(e,t,a){"use strict";var n=a("23e7"),r=a("5a34"),o=a("1d80"),c=a("ab13");n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"48b8":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));a("ac1f"),a("5319");var n=a("6c02"),r=function(e){if(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),c=t.getMinutes(),i=t.getSeconds(),s="",l="",d="",u="",m="",p="";return s=a+"",l=n<10?"0"+n:n+"",d=r<10?"0"+r:r+"",u=o<10?"0"+o:o+"",m=c<10?"0"+c:c+"",p=i<10?"0"+i:i+"",s+"-"+l+"-"+d+" "+u+":"+m+":"+p}return null},o=function(e){var t=Object(n["e"])();if(!(e.length<1))return!0;t.replace("/error/role")}},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},ab13:function(e,t,a){var n=a("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,a){"use strict";var n=a("23e7"),r=a("4d64").includes,o=a("44d2"),c=a("ae40"),i=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!i},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")}}]);