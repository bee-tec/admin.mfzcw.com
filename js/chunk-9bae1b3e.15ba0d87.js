(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9bae1b3e"],{"48b8":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));a("ac1f"),a("5319");var n=a("6c02"),r=function(e){if(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),c=t.getMinutes(),i=t.getSeconds(),s="",l="",u="",d="",p="",f="";return s=a+"",l=n<10?"0"+n:n+"",u=r<10?"0"+r:r+"",d=o<10?"0"+o:o+"",p=c<10?"0"+c:c+"",f=i<10?"0"+i:i+"",s+"-"+l+"-"+u+" "+d+":"+p+":"+f}return null},o=function(e){var t=Object(n["e"])();if(!(e.length<1))return!0;t.replace("/error/role")}},b43c:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r={class:"main"},o={class:"feature"},c=Object(n["createTextVNode"])(" 全部 "),i=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),s=Object(n["createTextVNode"])("搜索 "),l={class:"operation"},u={class:"item"},d=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),p=Object(n["createTextVNode"])("导出"),f={class:"table"};function m(e,t,a,m,b,g){var h=Object(n["resolveComponent"])("a-select-option"),j=Object(n["resolveComponent"])("a-select"),O=Object(n["resolveComponent"])("a-form-item"),x=Object(n["resolveComponent"])("a-range-picker"),y=Object(n["resolveComponent"])("a-button"),C=Object(n["resolveComponent"])("a-form"),w=Object(n["resolveComponent"])("a-empty"),v=Object(n["resolveComponent"])("a-table"),S=Object(n["resolveComponent"])("a-spin");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(C,{layout:"inline",model:e.state.searchForm},{default:Object(n["withCtx"])((function(){return[1==e.state.userInfo.headCompany?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,label:"公司选择"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{value:e.state.companyId,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.companyId=t}),style:{width:"150px"},onChange:t[2]||(t[2]=function(t){return e.onCompanySelectChange()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{value:"allData"},{default:Object(n["withCtx"])((function(){return[c]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.companyList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:t,value:e.companyId},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(O,{label:"拓展人员"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{placeholder:"请选择",allowClear:"",value:e.state.searchForm.staffName,"onUpdate:value":t[3]||(t[3]=function(t){return e.state.searchForm.staffName=t}),style:{width:"150px"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.state.BDStaffList,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:t,value:e.name},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(O,{label:"时间范围"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x,{style:{width:"230px"},value:e.state.searchForm.timeRange,"onUpdate:value":t[4]||(t[4]=function(t){return e.state.searchForm.timeRange=t}),onChange:e.onDataRangePicker},null,8,["value","onChange"])]})),_:1}),Object(n["createVNode"])(O,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{class:"search-btn",onClick:t[5]||(t[5]=function(t){return e.onClickSearch()})},{default:Object(n["withCtx"])((function(){return[i,s]})),_:1})]})),_:1})]})),_:1},8,["model"]),Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(y,{class:"export-btn",type:"primary",onClick:e.onClickExport},{default:Object(n["withCtx"])((function(){return[d,p]})),_:1},8,["onClick"])])])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])(S,{tip:"Loading...",spinning:e.state.delayLoading},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(w,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(v,{size:"middle",rowKey:"staffId",scroll:{x:!0},pagination:{total:e.state.pagination.total,current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,simple:e.state.pagination.simple,size:e.state.pagination.size,defaultPageSize:e.state.pagination.defaultPageSize,showSizeChanger:e.state.pagination.showSizeChanger,pageSizeOptions:e.state.pagination.pageSizeOptions,showTotal:e.state.pagination.showTotal,onChange:e.onPageChange,onShowSizeChange:e.onPageSizeChange},columns:e.state.tableColumns,dataSource:e.state.tableData},{giftSendCount:Object(n["withCtx"])((function(e){var t=e.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(null==t?0:t),1)]})),_:1},8,["pagination","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])])])}a("380f");var b=a("f64c"),g=(a("96cf"),a("1da1")),h=a("0613"),j=a("48b8"),O=a("b32d"),x=Object(n["defineComponent"])({setup:function(){var e={tableColumns:[{title:"所属公司",dataIndex:"companyName",align:"center",slots:{customRender:"companyName"}},{title:"拓展人员",dataIndex:"name",align:"center",slots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",align:"center",slots:{customRender:"phone"}},{title:"项目数量",dataIndex:"projectCount",align:"center",slots:{customRender:"projectCount"}},{title:"跟进中项目数",dataIndex:"projectFollowCount",align:"center",slots:{customRender:"projectFollowCount"}},{title:"项目跟进总次数",dataIndex:"projectFollowAllFrequency",align:"center",slots:{customRender:"projectFollowAllFrequency"}},{title:"资源数量",dataIndex:"resourceCount",align:"center",slots:{customRender:"resourceCount"}},{title:"跟进中资源数",dataIndex:"resourceFollowCount",align:"center",slots:{customRender:"resourceFollowCount"}},{title:"资源跟进总次数",dataIndex:"resourceFollowAllFrequency",align:"center",slots:{customRender:"resourceFollowAllFrequency"}},{title:"礼品发放数",dataIndex:"giftSendCount",align:"center",slots:{customRender:"giftSendCount"}}],tableData:[],selectedRowKeys:[],delayLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","30","50","100"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},searchForm:{staffName:void 0,timeRange:[],startTime:"",endTime:""},companyList:[],actions:[],companyId:"",BDStaffList:[]},t=Object(n["reactive"])(e),a=Object(h["c"])();t.userInfo=a.state.baseInfo.userInfo,t.companyId=t.userInfo.companyId,t.companyId=1==t.userInfo.headCompany?"allData":t.companyId,t.companyList=a.state.baseInfo.companyList,t.actions=JSON.parse(sessionStorage.currentActions),Object(j["b"])(t.actions);var r=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"allData"!=t.companyId){e.next=14;break}return e.next=4,O["a"].get("staff/getStaffIdAndName",{staffType:1});case 4:if(a=e.sent,"000000"!=a.code){e.next=10;break}return t.BDStaffList=a.data,e.abrupt("return",!0);case 10:return b["a"].error(a.msg,1),e.abrupt("return",!1);case 12:e.next=24;break;case 14:return e.next=16,O["a"].get("staff/getStaffIdAndName",{companyId:t.companyId,staffType:1});case 16:if(n=e.sent,"000000"!=n.code){e.next=22;break}return t.BDStaffList=n.data,e.abrupt("return",!0);case 22:return b["a"].error(n.msg,1),e.abrupt("return",!1);case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e["catch"](0),e.t0;case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(a,n,o){var c,i,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r(),"allData"!=t.companyId){e.next=32;break}if(!o){e.next=18;break}return e.next=6,O["a"].post("staff/getStaffExpandStatisticsList",{page:a,rows:n},{params:{staffName:o.staffName,state:o.state,startTime:o.startTime,endTime:o.endTime}});case 6:if(c=e.sent,"000000"!=c.code){e.next=14;break}return t.tableData=c.data.list,t.pagination.total=c.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 14:return b["a"].error(c.msg,1),e.abrupt("return",!1);case 16:e.next=30;break;case 18:return e.next=20,O["a"].post("staff/getStaffExpandStatisticsList",{page:a,rows:n});case 20:if(i=e.sent,"000000"!=i.code){e.next=28;break}return t.tableData=i.data.list,t.pagination.total=i.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 28:return b["a"].error(i.msg,1),e.abrupt("return",!1);case 30:e.next=59;break;case 32:if(!o){e.next=47;break}return e.next=35,O["a"].post("staff/getStaffExpandStatisticsList",{page:a,rows:n},{params:{companyId:t.companyId,staffName:o.staffName,state:o.state,startTime:o.startTime,endTime:o.endTime}});case 35:if(s=e.sent,"000000"!=s.code){e.next=43;break}return t.tableData=s.data.list,t.pagination.total=s.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 43:return b["a"].error(s.msg,1),e.abrupt("return",!1);case 45:e.next=59;break;case 47:return e.next=49,O["a"].post("staff/getStaffExpandStatisticsList",{page:a,rows:n},{params:{companyId:t.companyId}});case 49:if(l=e.sent,"000000"!=l.code){e.next=57;break}return t.tableData=l.data.list,t.pagination.total=l.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 57:return b["a"].error(l.msg,1),e.abrupt("return",!1);case 59:e.next=64;break;case 61:throw e.prev=61,e.t0=e["catch"](0),e.t0;case 64:case"end":return e.stop()}}),e,null,[[0,61]])})));return function(t,a,n){return e.apply(this,arguments)}}();o(t.pagination.current,t.pagination.pageSize);var c=function(){t.delayLoading=!0,o(t.pagination.current,t.pagination.pageSize)},i=function(e,a){t.searchForm.startTime=a[0],t.searchForm.endTime=a[1]},s=function(){t.delayLoading=!0,o(t.pagination.current,t.pagination.pageSize,t.searchForm)},l=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O["a"].getExport("project/exportExcelProjectList",{companyId:"allData"==t.companyId?null:t.companyId});case 3:a=e.sent,200==a.status?window.open(a.request.responseURL):b["a"].error("导出失败！",1),e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(e,a){t.delayLoading=!0,t.searchForm?o(e,a,t.searchForm):o(e,a),t.pagination.current=e,t.pagination.pageSize=a},d=function(e,a){t.delayLoading=!0,t.searchForm?o(e,a,t.searchForm):o(e,a),t.pagination.pageSize=a};return{state:t,onPageChange:u,onPageSizeChange:d,onDataRangePicker:i,onCompanySelectChange:c,onClickSearch:s,onClickExport:l}}});x.render=m;t["default"]=x}}]);