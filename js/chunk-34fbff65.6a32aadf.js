(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34fbff65"],{"0787":function(e,t,a){},2532:function(e,t,a){"use strict";var n=a("23e7"),r=a("5a34"),o=a("1d80"),c=a("ab13");n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"48b8":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));a("ac1f"),a("5319");var n=a("6c02"),r=function(e){if(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),c=t.getMinutes(),d=t.getSeconds(),l="",i="",s="",u="",b="",m="";return l=a+"",i=n<10?"0"+n:n+"",s=r<10?"0"+r:r+"",u=o<10?"0"+o:o+"",b=c<10?"0"+c:c+"",m=d<10?"0"+d:d+"",l+"-"+i+"-"+s+" "+u+":"+b+":"+m}return null},o=function(e){var t=Object(n["e"])();if(!(e.length<1))return!0;t.replace("/error/role")}},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"737a":function(e,t,a){"use strict";a.r(t);a("caad"),a("2532");var n=a("7a23"),r=Object(n["withScopeId"])("data-v-353f8d74");Object(n["pushScopeId"])("data-v-353f8d74");var o={class:"main"},c={class:"feature"},d={class:"operation"},l={key:0,class:"item"},i=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),s=Object(n["createTextVNode"])("新增"),u={key:1,class:"item"},b=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),m=Object(n["createTextVNode"])("编辑"),p={key:2,class:"item"},f=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),v=Object(n["createTextVNode"])("删除"),h={key:3,class:"item"},O=Object(n["createVNode"])("i",{class:"iconfont"},"",-1),g=Object(n["createTextVNode"])("保存"),j={class:"content"},k={class:"role"},w={class:"module"},y={class:"modalMaster",ref:"modalMaster"},N={class:"container"},x={class:"modalMaster",ref:"modalMaster"},V={class:"container"};Object(n["popScopeId"])();var R=r((function(e,t,a,R,C,S){var I=Object(n["resolveComponent"])("a-button"),M=Object(n["resolveComponent"])("a-empty"),B=Object(n["resolveComponent"])("a-table"),D=Object(n["resolveComponent"])("a-spin"),_=Object(n["resolveComponent"])("a-checkbox"),L=Object(n["resolveComponent"])("a-input"),A=Object(n["resolveComponent"])("a-form-item"),T=Object(n["resolveComponent"])("a-form"),E=Object(n["resolveComponent"])("a-modal");return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",d,[e.state.actions.includes("新增")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",l,[Object(n["createVNode"])(I,{type:"primary",class:"add-btn",onClick:e.modalAddShowBtn},{default:r((function(){return[i,s]})),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("编辑")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",u,[Object(n["createVNode"])(I,{type:"primary",class:"edit-btn",onClick:e.modalEditShowBtn,disabled:!e.hasSelected},{default:r((function(){return[b,m]})),_:1},8,["onClick","disabled"])])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("删除")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",p,[Object(n["createVNode"])(I,{type:"danger",class:"del-btn",onClick:e.modalDeleteShowBtn,disabled:!e.hasSelected},{default:r((function(){return[f,v]})),_:1},8,["onClick","disabled"])])):Object(n["createCommentVNode"])("",!0),e.state.actions.includes("保存")?(Object(n["openBlock"])(),Object(n["createBlock"])("div",h,[Object(n["createVNode"])(I,{type:"primary",class:"save-btn",onClick:e.roleSaveBtn,disabled:!e.hasSelected},{default:r((function(){return[O,g]})),_:1},8,["onClick","disabled"])])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",j,[Object(n["createVNode"])("div",k,[Object(n["createVNode"])(D,{tip:"Loading...",spinning:e.state.delayLoading},{default:r((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(M,null,null,512),[[n["vShow"],e.state.delayLoading]]),Object(n["withDirectives"])(Object(n["createVNode"])(B,{size:"middle",rowKey:"magRoleId",scroll:{x:!0},pagination:!1,rowSelection:{type:"radio",selectedRowKeys:e.state.selectedRowKeys,onChange:e.onChangTable,onSelect:e.onSelect,fixed:!0},columns:e.state.tableColumns,dataSource:e.state.tableData},{createTime:r((function(t){var a=t.text;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.FormatDate(a)),1)]})),_:1},8,["rowSelection","columns","dataSource"]),[[n["vShow"],!e.state.delayLoading]])]})),_:1},8,["spinning"])]),Object(n["createVNode"])("div",w,[Object(n["createVNode"])(D,{tip:"Loading...",spinning:e.state.delayModuleLoading},{default:r((function(){return[e.state.delayModuleLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(M,{key:0})):Object(n["createCommentVNode"])("",!0),e.state.delayModuleLoading?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(B,{key:1,size:"middle",defaultExpandAllRows:!0,rowKey:"moduleId",scroll:{x:!0},pagination:!1,columns:e.state.tableModuleColumns,dataSource:e.state.tableModuleData},{actions:r((function(t){var a=t.record;return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(a.actions,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:a,disabled:e.state.isCheckBox,checked:t.checked,"onUpdate:checked":function(e){return t.checked=e}},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.actionName),1)]})),_:2},1032,["disabled","checked","onUpdate:checked"])})),128))]})),_:1},8,["columns","dataSource"]))]})),_:1},8,["spinning"])])]),Object(n["createVNode"])("div",y,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalAddVisible,"onUpdate:visible":t[2]||(t[2]=function(t){return e.state.modalAddVisible=t}),width:500,title:"新增角色",onOk:e.modalAddSaveBtn},{default:r((function(){return[Object(n["createVNode"])("div",N,[Object(n["createVNode"])(T,{ref:"addModal",model:e.state.addModal,layout:"inline"},{default:r((function(){return[Object(n["createVNode"])(A,{label:"角色名",required:""},{default:r((function(){return[Object(n["createVNode"])(L,{placeholder:"请输入",value:e.state.addModal.roleName,"onUpdate:value":t[1]||(t[1]=function(t){return e.state.addModal.roleName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1})]})),_:1},8,["model"])])]})),_:1},8,["getContainer","visible","onOk"])],512),Object(n["createVNode"])("div",x,[Object(n["createVNode"])(E,{getContainer:function(){return e.$refs.modalMaster},destroyOnClose:"",centered:"",maskClosable:!1,visible:e.state.modalEditVisible,"onUpdate:visible":t[4]||(t[4]=function(t){return e.state.modalEditVisible=t}),width:500,title:"编辑角色",onOk:e.modalEditSaveBtn},{default:r((function(){return[Object(n["createVNode"])("div",V,[Object(n["createVNode"])(T,{ref:"editModal",model:e.state.editModal,layout:"inline"},{default:r((function(){return[Object(n["createVNode"])(A,{label:"角色名",required:""},{default:r((function(){return[Object(n["createVNode"])(L,{placeholder:"请输入",value:e.state.editModal.roleName,"onUpdate:value":t[3]||(t[3]=function(t){return e.state.editModal.roleName=t}),style:{width:"260px"}},null,8,["value"])]})),_:1})]})),_:1},8,["model"])])]})),_:1},8,["getContainer","visible","onOk"])],512)])})),C=(a("4de4"),a("04f3"),a("ed3b")),S=(a("380f"),a("f64c")),I=(a("96cf"),a("1da1")),M=a("0613"),B=a("48b8"),D=a("b32d"),_=Object(n["defineComponent"])({setup:function(){var e={tableColumns:[{title:"角色名",dataIndex:"roleName",align:"center",slots:{customRender:"roleName"}},{title:"添加时间",dataIndex:"createTime",align:"center",slots:{customRender:"createTime"}}],tableData:[],selectedRowKeys:[],delayLoading:!0,delayModuleLoading:!0,pagination:{total:0,simple:!1,current:1,pageSize:10,size:"default",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","30","50","100"],showTotal:function(e){return"共有 ".concat(e," 条数据")}},addModal:{roleName:""},editModal:{},modalAddVisible:!1,modalEditVisible:!1,modalDeleteVisible:!1,tableModuleColumns:[{title:"模块名字",dataIndex:"moduleName",width:200,slots:{customRender:"moduleName"}},{title:"功能",dataIndex:"actions",slots:{customRender:"actions"}},{title:"模块地址",dataIndex:"moduleUrl",slots:{customRender:"moduleUrl"}},{title:"排序编号",dataIndex:"sort",width:50,align:"center",slots:{customRender:"sort"}}],tableModuleData:[{moduleId:0}],checkedKeys:!0,unChecked:!1,isCheckBox:!0,userInfo:{userId:"",loginName:"",realName:"",phone:"",companyId:"",companyName:"",headCompany:null},actions:[]},t=Object(n["reactive"])(e),a=Object(M["c"])();t.userInfo=a.state.baseInfo.userInfo,t.actions=JSON.parse(sessionStorage.currentActions),Object(B["b"])(t.actions);var r=Object(n["computed"])((function(){return 1==t.selectedRowKeys.length})),o=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D["a"].post("manageRole/get",{page:1,rows:100},{params:{companyId:t.userInfo.companyId}});case 3:if(a=e.sent,"000000"!=a.code){e.next=11;break}return t.tableData=a.data.list,t.pagination.total=a.data.total,t.delayLoading=!1,e.abrupt("return",!0);case 11:return S["a"].error(a.msg,1),e.abrupt("return",!1);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();o();var c=function e(t){t.filter((function(t){t.children.length?e(t.children):delete t.children}))},d=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.delayModuleLoading=!0,e.next=4,D["a"].get("module/get",{companyId:t.userInfo.companyId});case 4:a=e.sent,"000000"==a.code&&(t.tableModuleData=a.data,t.delayModuleLoading=!1,c(t.tableModuleData)),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();d();var l=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D["a"].post("manageRole/add",{roleName:t.addModal.roleName,companyId:t.userInfo.companyId});case 3:if(a=e.sent,"000000"!=a.code){e.next=12;break}return S["a"].success("角色添加成功！",1),o(),t.modalAddVisible=!1,t.addModal.roleName="",e.abrupt("return",!0);case 12:return S["a"].error(a.msg,1),e.abrupt("return",!1);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e["catch"](0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),i=function(){t.modalAddVisible=!0},s=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D["a"].post("manageRole/update",{magRoleId:t.editModal.magRoleId,roleName:t.editModal.roleName});case 3:if(a=e.sent,"000000"!=a.code){e.next=12;break}return S["a"].success("角色更新成功！",1),o(),t.modalEditVisible=!1,t.editModal.roleName="",e.abrupt("return",!0);case 12:return S["a"].error(a.msg,1),e.abrupt("return",!1);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e["catch"](0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),u=function(){t.modalEditVisible=!0},b=function(){C["a"].confirm({title:"确认删除该角色？",centered:!0,onOk:function(){return Object(I["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D["a"].get("manageRole/del",{roleId:t.selectedRowKeys[0]});case 3:if(a=e.sent,"000000"!=a.code){e.next=13;break}return e.next=7,o();case 7:return S["a"].success("角色删除成功！",1),t.modalDeleteVisible=!1,t.selectedRowKeys=[],e.abrupt("return",!0);case 13:return S["a"].error(a.msg,1),e.abrupt("return",!1);case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e["catch"](0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},onCancel:function(){}})},m=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.delayModuleLoading=!0,e.next=4,D["a"].post("RoleAction/get",null,{params:{roleId:a.magRoleId}});case 4:if(n=e.sent,"000000"!=n.code){e.next=14;break}return t.tableModuleData=n.data,c(t.tableModuleData),sessionStorage.OperatorRoleMagRoleId=a.magRoleId,t.delayModuleLoading=!1,t.isCheckBox=!1,e.abrupt("return",!0);case 14:return S["a"].error(n.msg,1),e.abrupt("return",!1);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e["catch"](0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e,t){e.filter((function(e){if(!e.checked)return!1;var a={actionId:e.actionId,moduleId:e.moduleId};t.push(a)}))},f=function e(t,a){t.filter((function(t){t.children?e(t.children,a):p(t.actions,a)}))},v=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],e.next=3,f(t.tableModuleData,a);case 3:return e.prev=3,e.next=6,D["a"].post("RoleAction/update",a,{params:{roleId:sessionStorage.OperatorRoleMagRoleId}});case 6:if(n=e.sent,"000000"!=n.code){e.next=16;break}return sessionStorage.removeItem("OperatorRoleMagRoleId"),S["a"].success("权限保存成功！",1),t.selectedRowKeys=[],d(),t.isCheckBox=!0,e.abrupt("return",!0);case 16:return S["a"].error(n.msg,1),e.abrupt("return",!1);case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e["catch"](3),e.t0;case 23:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(){return e.apply(this,arguments)}}(),h=function(e,a){t.selectedRowKeys=e,e.length>0&&(t.editModal.roleName=a[0].roleName,t.editModal.magRoleId=a[0].magRoleId)},O=function(e,t){t?m(e):d()};return{state:t,onChangTable:h,onSelect:O,hasSelected:r,modalAddSaveBtn:l,modalAddShowBtn:i,modalEditSaveBtn:s,modalEditShowBtn:u,modalDeleteShowBtn:b,modalRoleEditShow:m,roleSaveBtn:v,FormatDate:B["a"]}}});a("ffbf");_.render=R,_.__scopeId="data-v-353f8d74";t["default"]=_},ab13:function(e,t,a){var n=a("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,a){"use strict";var n=a("23e7"),r=a("4d64").includes,o=a("44d2"),c=a("ae40"),d=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!d},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},ffbf:function(e,t,a){"use strict";a("0787")}}]);